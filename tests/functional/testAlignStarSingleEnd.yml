- name: "AlignStarSingleEnd"
  # The gruesome bash command injection using sed is needed
  # as cromwell does not handle relative outputs well.
  # It will put them relative to each execution folder.
  # Therefore the output needs be an absolute path. We can
  # accomplish this by injecting $PWD (equal to whatever absolute
  # dir our test is running) into the inputs.json
  # It is a gruesome hack, but it works.
  command: >
    bash -c '
    TEST_JSON=tests/inputs/AlignStarSingleEnd.json ;
    sed -i "2i\"AlignStar.outputDir\":\"$PWD/test-output\"," $TEST_JSON ;
    cromwell -Dconfig.file=tests/cromwell_config/docker.conf run -i $TEST_JSON align-star.wdl'
  files:
    - path: "test-output/rna3-lib.Aligned.sortedByCoord.out.bam"
    - path: "test-output/rna3-lib.Aligned.sortedByCoord.out.bai"